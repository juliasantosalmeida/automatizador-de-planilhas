<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Analisador Morfológico | Microglia AI</title>

  <!-- Modern Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;700&family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="shortcut icon" href="assets/imagens/preview.svg" type="image/x-icon">
  <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
  <script type="text/javascript" src="./index.js" defer=""></script>
  <link rel="stylesheet" href="./index.css">
</head>

<body>

  <div class="app-wrapper">
    <!-- Header Section -->
    <header class="app-header">
      <div class="logo-container">
        <!-- Abstract Cell/Microglia Icon -->
        <svg class="app-logo" width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z"
            stroke="url(#paint0_linear)" stroke-width="2" stroke-linecap="round" />
          <path
            d="M12 16C14.2091 16 16 14.2091 16 12C16 9.79086 14.2091 8 12 8C9.79086 8 8 9.79086 8 12C8 14.2091 9.79086 16 12 16Z"
            fill="url(#paint1_linear)" fill-opacity="0.5" />
          <path d="M12 12V6M12 12L16.24 16.24M12 12L7.76 16.24" stroke="url(#paint2_linear)" stroke-width="2"
            stroke-linecap="round" />
          <defs>
            <linearGradient id="paint0_linear" x1="2" y1="2" x2="22" y2="22" gradientUnits="userSpaceOnUse">
              <stop stop-color="#FF9F4A" />
              <stop offset="1" stop-color="#FF5D00" />
            </linearGradient>
            <linearGradient id="paint1_linear" x1="12" y1="8" x2="12" y2="16" gradientUnits="userSpaceOnUse">
              <stop stop-color="#FF9F4A" />
              <stop offset="1" stop-color="#FF5D00" />
            </linearGradient>
            <linearGradient id="paint2_linear" x1="12" y1="6" x2="12" y2="16.24" gradientUnits="userSpaceOnUse">
              <stop stop-color="#FF9F4A" />
              <stop offset="1" stop-color="#FF5D00" />
            </linearGradient>
          </defs>
        </svg>
        <div class="header-text">
          <h1>Microglia Analytics</h1>
          <span class="subtitle">Analisador Morfológico</span>
        </div>
      </div>
    </header>

    <main class="app-content">

      <!-- Configuration Section -->
      <div class="card config-card">
        <div class="card-header">
          <div class="icon-box">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M12 20h9" />
              <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" />
            </svg>
          </div>
          <h2>Modelo da Planilha:</h2>
        </div>

        <div class="options-grid">
          <label class="mode-option-card">
            <input type="radio" name="mode" value="1" checked="">
            <div class="card-content">
              <span class="check-circle"></span>
              <div class="text-content">
                <span class="mode-title">1. Partículas</span>
                <span class="mode-desc">Maior Área + Médias</span>
              </div>
            </div>
          </label>

          <label class="mode-option-card">
            <input type="radio" name="mode" value="2">
            <div class="card-content">
              <span class="check-circle"></span>
              <div class="text-content">
                <span class="mode-title">2. Esqueleto</span>
                <span class="mode-desc">Branches/Junctions</span>
              </div>
            </div>
          </label>

          <label class="mode-option-card">
            <input type="radio" name="mode" value="3">
            <div class="card-content">
              <span class="check-circle"></span>
              <div class="text-content">
                <span class="mode-title">3. Soma (Col. B)</span>
                <span class="mode-desc">Total + Médias</span>
              </div>
            </div>
          </label>
        </div>
      </div>

      <!-- Upload Section -->
      <div class="upload-section-wrapper">
        <div class="upload-area" onclick="document.getElementById('fileInput').click()">
          <div class="upload-content">
            <div class="upload-icon-circle">
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" />
                <polyline points="17 8 12 3 7 8" />
                <line x1="12" y1="3" x2="12" y2="15" />
              </svg>
            </div>
            <h3>Carregar Arquivos</h3>
            <p>.csv, .xlsx ou .xls</p>
          </div>
          <!-- Hidden input must remain for JS logic -->
          <input type="file" id="fileInput" accept=".csv, .xlsx, .xls" multiple="" style="display:none">
        </div>

        <p id="filterNotice" class="status-notice">
          <span class="status-dot"></span>
          Modo atual: Processando todos os arquivos selecionados.
        </p>
      </div>

      <div id="errorMessage" class="error-toast"></div>

      <!-- Results Section -->
      <div id="resultsArea" class="results-container" style="display:none;">
        <div class="results-header">
          <h3>Resultados da Análise</h3>
          <div class="counter-badge" id="fileCounter">0 Arquivos</div>
        </div>

        <div class="table-wrapper">
          <table class="results-table" id="tableOutput">
            <thead>
              <tr id="tableHeader">
                <th>Arquivo</th>
              </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot id="tableFooter"></tfoot>
          </table>
        </div>
      </div>

      <!-- Pet Button -->
      <!-- Pet Button -->
      <button class="pet-btn" id="petBtn" title="Easter Egg dos Bichinhos">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <circle cx="4" cy="11" r="2.5" />
          <circle cx="9" cy="6" r="2.5" />
          <circle cx="15" cy="6" r="2.5" />
          <circle cx="20" cy="11" r="2.5" />
          <path d="M12 11c-2.5 0-5 2-5 5 0 2 2 4 5 4s5-2 5-4c0-3-2.5-5-5-5z" />
        </svg>
      </button>

      <!-- Heart Button -->
      <button class="heart-btn" id="heartBtn">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
          <path
            d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
        </svg>
      </button>

      <!-- Love Modal -->
      <div id="loveModal" class="modal-overlay">
        <div class="modal-content love-theme">
          <button class="close-modal" id="closeModal">&times;</button>

          <h2 class="love-title">Para a minha xuxuzinha ❤️</h2>

          <div class="slider-container">
            <div class="slider-wrapper" id="sliderWrapper">
              <img src="./assets/imagens/IMG-20251026-WA0112.jpg" class="slide active">
              <img src="./assets/imagens/IMG-20251225-WA0005.jpg" class="slide">
              <img src="./assets/imagens/Picsart_25-10-26_10-44-41-896.jpg" class="slide">
              <img src="./assets/imagens/Picsart_25-10-26_19-40-07-542.jpg" class="slide">
              <img src="./assets/imagens/Screenshot_20250930_193302_TikTok.jpg" class="slide">
            </div>
            <button class="slider-btn prev" id="prevBtn">&#10094;</button>
            <button class="slider-btn next" id="nextBtn">&#10095;</button>
          </div>

          <p class="love-message">
            Você é a pessoa mais incrível, inteligente, linda e engraçada que já conheci.
          </p>
          <p class="love-message love-bottom-msg">
            Amo você meu bem :)
          </p>
        </div>
      </div>

      <!-- Pet Easter Egg Overlay -->
      <div id="petOverlay" class="pet-overlay">
        <div class="pet-container mel-container">
          <img src="./assets/imagens/mel.jpeg" class="pet-img mel" alt="Mel">
          <div class="pet-bubble">oi titia</div>
        </div>
        <div class="pet-container joey-container">
          <img src="./assets/imagens/joey.jpg" class="pet-img joey" alt="Joey">
          <div class="pet-bubble">oi mamãe</div>
        </div>
      </div>

    </main>
  </div>

</body>

</html>